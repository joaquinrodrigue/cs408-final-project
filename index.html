<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Sets</title>
  <meta name="description" content="Based on the dead Google Sets.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header>
    <h1>[insert name here] Sets</h1>
    <p>Based on the dead Google Sets</p>
  </header>
  
  <main>
    <aside class="mainpage">
      <p tabindex="0" class="bluebutton"><a href="list.html">Explore Sets</a></p>
      <p tabindex="0" class="greenbutton"><a href="create.html">Create a Set</a></p>
    </aside>

    <article class="mainpage">
      <form class="search">
        <label for="searchwords">Begin typing to gather some words</label>
        <input id="searchwords" name="searchwords" type="text" placeholder="Red, Blue, Green...">
        <button id="search">Go!</button>
      </form>

      <p id="words">We'll put related words here.</p>
    </article>
  </main>

  <script src="js/main.js"></script>
  <script>
    window.onload = () => {
      const searchButton = document.getElementById('search');

      searchButton.addEventListener('click', async (event) => {
        event.preventDefault();
        const json = await searchAllSets();
        
        let words = document.getElementById('words');
        if (!json) {
          words.innerHTML = "Something went wrong, please try again later!";
          return;
        }

        words.innerHTML = "";
        let userInput = document.getElementById('searchwords').value;
        let filteredJson = filterData(json, { words: userInput });
        console.log(filteredJson);
        
        filteredJson.forEach(element => {
          let wordsSeparated = element.words.split(", ");
          wordsSeparated.forEach(word => {
            words.innerHTML += word + "<br>";
          })
        });
      });
    }
  </script>
</body>

</html>